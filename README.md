# Reso Calc Log PAVEL SHAPOVAL Library

2.2 (JSP version almost Done. Last thing wev left to do is transmitting featuring JSON)

29.08.2018 [11:05] 


ЧТО СДЕЛАНО:

1. В целом задача выполнена. Проект закончен. Все в целом работает, сравнение идет по всем классам:

- WsCalcLogsNew
- WsDrivers
- WsPartners
- WsPremium
- WsCoeffLogs
- WsCommonLogs

2. Все организовано через Фабрики. Плюс основной функционал по возможности вынесен в ДАО. То есть внутренности методов фабрик довольно короткие. Код не громоздкий. Однако сейчас там небольшой раздрай. Так получилось, что я сначала начал один паттерн лепить, а потом параллельно другой. Это косяк. Надо все свести ко второму. Да и вообще код почитстить.

3. Все полностью автоматизировано. Есть методы, они довольно универсальны, которые сами парсят классы из WebRowSeta, определяют типы данных при считывании и при добавлении, пишут данные в хэш и так далее. Оказалось, что с фабриками реально работать удобнее - по сути добавление новых классов теперь проходит значительно быстрее.

4. Но так как фабрики естественно работают с типовыми интерфейсами, все равно возникли косяки, потому что какие-то таблицы например имеют "вертикальную структуру", то есть в первом столбце "вниз уходят" названия полей, а следующие два столбца - это calcid. А есть таблицы, где calcid по сути вообще можно не отображать, но за одним calcid могут быть закреплены (связь один-ко-многим) несколько значений. И там пришлось вводить такую сущность как Юнит, Энтити у меня содержит ЭёррейЛист Юнитов и пока в стринг хэшмапы все это пишется просто через тире. Все это нужно чтобы не ломать стройную структур моих интерфейсов. В будущем я буду все это пихать стрингом, но в json'е, на клиенте JS'ом я буду его распарсивать и пихать по столбцам таблички.

5. Оказалось что все это КРУД-ДАО на самом деле пока не нужно: то есть то, на что я тратил время - автомтизированное составление запросов, добавление, удаление... то есть по сути собственный ОРМ, который я кстати написал.... все это не надо.

ЧТО НУЖНО СДЕЛАТЬ В СЛЕДУЮЩЕЙ ВЕРСИИ:

1. Таблички типа Premium ссылаются на справочники. Надо как-то научиться туда выкидывать/подпихивать данные из справочников
2. По хорошему надо провести нормальное тестирование: оттестить разные кальк-айди, все нуль-эксепшены. Провести юзеровское тестирование на клиенте: например сейчас система не определяет какой радио-баттон выбран.
3. Ну конечно же, надо разобраться с JSON'ом. Чтобы данные передавались в этом формате и парсились на клиенте в JS
4. Ну и в конце все это надо перевести на REST, потом пихать под формат кирилловского проекта, из спринга делать спрингбут, с JSP все переводить во VueJs  и натягивать красоту.
5. Надо почистить код. Сделать код-стайл.